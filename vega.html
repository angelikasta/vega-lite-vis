<!DOCTYPE html>
<html>
<head>
  <title>Europe - Statistics</title>
  <meta charset="utf-8">
    
    

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.8/vega.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.3/vega-lite.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-rc7/vega-embed.js"></script>
    <!-- Dependencies for Vega visualization-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.8/vega.min.js"></script>
<!-- Dependencies for Vega-lite visualization-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.3/vega-lite.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="vega.css" />
<!-- Vega Tooltip
<script src="https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.4.4/vega-tooltip.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.4.4/vega-tooltip.min.css">
-->
  <style media="screen">
    /* Add space between Vega-Embed links  */
    .vega-actions a {
      margin-right: 5px;
    }
  </style>
</head>
<body>
    <div class="header">
  <h1>Europe - Statistics</h1>
    </div>
    
    
<ul class="topnav">
 <li><a href="vega.html">Story 1</a></li>
  <li><a href="first.html">Story 2</a></li>
    

    </ul>
    
    <div class="row">
        <div class="column middle">
  <!-- Container for the visualization -->
  <div id="areasq"></div>
            </div>
        <div class="column side"> 
            <div class="textS">
           To start I decided to look into area in sq km for each country. As a quantitative value is encoded as lenght of the bar which is very effective channel for quantitative data. Also mean of the area in sq km for all countries is encoded as position of the line which again is a very effective channel for quantitative data. As a combination of quantitative data (area sq km) and nominal categorical data (countries), I have chosed a bar chart as that would be the most effective method to display this data. I have also added a tooltip so the user can view in detail the area in sq km of each country.
            </div>
           <div class="textS">
                12 countries out of 39 (Belarus, Romania, United Kingdom, Italy, Poland, Norway, Finland, Germany, Sweden, Spain France and Ukraine) are above average in area size. 
            </div>
        </div>

     <div class="column middle"> 
    <div id="population"></div>
        </div>
         <div class="column side"> 
            <div class="textS">
           Next step I took to analyze the data was to take a look at population across the countries. Population as quantitative value is encoded as lenght of the bar which is very effective channel for quantitative data. Also mean of the population for all countries is encoded as position of the line which again is a very effective channel for quantitative data. As a combination of quantitative data (population) and nominal categorical data (countries), I have chosed a bar chart as that would be the most effective method to display this data. I have also added a tooltip so the user can view in detail the population of each country.
             </div>
           <div class="textS">
                9 countries out of 39 (Netherlands, Romania, Poland, Spain, Ukraine, Italy, United Kingdom, France, Germany) are above average in population size.   
             </div>
        </div>
       
        
    <div class="column m">      
    <div id="popScatter"></div>
        </div>
         <div class="column m2"> 
            <div class="textS">
            Previous two charts displayed the biggest countries and ones with highest population however by comparing this charts it was easy to see that not all of the biggest countries have a very big population. To display this finding I decided to display the 12 countries wih above average size on scatterplot. </div>
             <div class="textS">
                The scatterplot consists of population size and area size as two quantitative data types are encoded as position of the point which is a very effective channel for quantitative data. The countries are encoded as colour which is effective channel to represent categorical data.</div>
             <div class="textS">
                 It is easy to see that not all big countries have very high population - for example Sweden being the 4th biggest country has below average population, similarly to Finland, Norway and Belarus. 
             </div>
        </div> 
       
        <div class="column middle"> 
        
     <div id="popDens"></div> 
            
        </div>
        
      <div class="column side"> 
            <div class="textS">
            Following on the findings from previous charts I decided to have a look at population density across the countries. To do that I took an area size and divided that by the population. The bar chart displays average population per sq km. Population density as quantitative value is encoded as lenght of the bar which is very effective channel for quantitative data. Also mean of the population density for all countries is encoded as position of the line which again is a very effective channel for quantitative data. As a combination of quantitative data (population density) and nominal categorical data (countries), I have chosed a bar chart as that would be the most effective method to display this data. I have also added a tooltip so the user can view in detail the population density of each country. 
          </div>
        </div>
        <div class="column h">
          <div class="textS">
          It is very easy to see that Malta has much higher population density than any other country. 10 countries (Malta, Netherlands, Belgium, United Kingdom, Germany, Liechtenstein, Italy, Switzerland, Luxembourg and Andorra) out of 39 have higher than average population density. Out of this 10 countries only 4 (Germany, United Kingdom, Italy and Netherlands) have higher than average overall population and only 3 countries (Germany, Italy, United Kingdom) have bigger than average size in sq km which means that only this 3 countries can be considered biggest in terms of size as well as population density.
          </div>
          <div class="textS">
          It is very interesting to see that countries with the lowest population density, (Iceland, Norway, Finland, Sweden, Estonia, Latvia, Belarus, Lithuania) are all in northern part of Europe. 
          </div>
        </div>   
        
     <div class="column middle">    
    <div id="GPDaverage"></div> 
        </div>
        <div class="column side"> 
            <div class="textS">
            Taking into consideration such a varience in population density I decided to see if there is any relationship between population density and ecomical status of the country. To do that I decided to focus on GDP per capita, which is a measure of a country's economic output (GDP) that accounts for its number of people. That makes it a good measurement of a country's standard of living. To get the GDP per capita I have divided the country's GDP by its total population. As a first step I decided to use a bar chart to display the findings for each country. GDP per capita as quantitative value is encoded as lenght of the bar which is very effective channel for quantitative data. Also mean of the GDP per capita for all countries is encoded as position of the line which again is a very effective channel for quantitative data. 
            </div>
        </div>
        <div class="column h">
            <div class="textS">
                As a combination of quantitative data (GDP per capita) and nominal categorical data (countries), I have chosen a bar chart as that would be the most effective method to display this data. I have also added a tooltip so the user can view in detail the GDP per capita of each country.
            It is very easy to see that Luxembourg has a much higher than average GDP per capita. 19 countries out of 39 have higher than average GDP per capita. 
            </div>
        </div> 
        
        <div class="column h" style="text-align: center">  
      <div id="GDPperPers"></div>
        </div>
        
        <div class="column"> 
            <div class="textS">
            Next step I took was to compare the population density and GDP per capita to verify whether there is any relationship between them. I have decided to use a stacked bar chart to display this data. GDP per capita and population density as quantitative values are encoded as lenght of the bar which is very effective channel for quantitative data. As there are two quantitative data types (population density and GDP per capita) I decide to add colour and opacity for the user to be able to see both values. Light blue colour displays the GDP per capita and darker blue the population density. I have decided to use a stacked bar chart instead of scatterplot as because of the amount of countries scatterplot wouldnt show the data in clear way. 
            </div>
           <div class="textS">
            It is clear to see that some countries such as Luxembourgh has very high GDP per capita as well as very high population density. Looking at other countries with high density population such as Belgium, Netherlands, United Kingdom, Germany, Switzerland they all, apart from Malta, have higher than average GDP per capita. However, not all countries with higher than average GDP per capita have higher than average population density, as an example Norway, Finland and Sweden have very low population density despite having high GDP per capita.
            
            </div>
        </div> 
        
          <div class="column t"> 
        <div id="popGDPScatter" style="text-align: center"></div>
        </div>
          <div class="column t">
        
       <div id="popGDPScatter2" style="text-align: center"></div>
        </div>
         <div class="column"> 
            <div class="textS">
            To follow up from the findings on previous chart I decided to create 2 scatterplots to verify the results. First scatterplot displays all high population density countries and their GDP per capita. Second scatterplot displays all countries with highest GDP per capita and their population density.  The scatterplot consists of population density and GDP per capita as two quantitative data types are encoded as position of the point which is a very effective channel for quantitative data. The countries are encoded as colour which is effective channel to represent categorical data.
             </div>
             <div class="textS">
             First scatterplot displaying the highest density countries shows that all countires apart from Malta, have over than 20000 GDP per person which is average across the Europe, which means all high density countries apart from Malta have higher than average GDP per person.
             
             </div>
            <div class="textS">
             Second scatterplot however shows all the highest GDP countries however not all of them have high population density. 
             </div>
        </div>
       
    
  <script>
      
      
  // POPULATION ACROSS EUROPEAN COUNTRIES - BAR CHART
  var population = {
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "height": 300,
       "title": "Population across European countries",
    "data": {
      "url": "factbookeu.csv"
    },
      "layer": [ {
    "mark": "bar",
    "encoding": {
       // "x": {"field": "Year","type": "temporal", "axis": {"format": "%Y"}}, //"bin": "true",
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "Population"}},
        "y": {"field": "Population", "type": "quantitative",
          "scale": {"zero": false},
      
             },
    
        "tooltip": {"field": "Population", "type": "quantitative"},
    },
      },
        
 {
      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Population",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
     
      },
                     },
              ],
  };
      
  //"transform": [
    //  {"filter": {"field": "Country", "oneOf":["Ukraine", "Belarus"]}}
      //   ],
      
      
      
      // AREA SQ KM EUROPEAN COUNTRIES - BAR CHART
      var areasq = {
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
          "height": 300,
          
          "title": "Area (sq km) of European countries",
    "data": {
      "url": "factbookeu.csv"
    },
          "layer": [ {
   "mark": "bar",
     
    "encoding": {
        //"column": {
      //"field": "Country", "type": "nominal" },
       // "x": {"field": "Year","type": "temporal", "axis": {"format": "%Y"}}, //"bin": "true",
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "Area_sq_km"}},
        "y": {"field": "Area_sq_km", "type": "quantitative", "axis": {
            "grid": true
          },
          "scale": {"zero": false},
             
             },
        "tooltip": {"field": "Area_sq_km", "type": "quantitative"}
        // "color": {
     // "field": "Country", "type": "nominal"}
    
   
},
          },
                     {
      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Area_sq_km",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
     
      },
                     },
                    
              ],
  };
      
      
      
// POPULATION OF LARGEST COUNTRIES VS AREA - SCATTERPLOT
        var popScatter = {
             "title": "Largest countries Area vs Population Scatterplot",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
            "width": 500,
            "height": 300,
    "data": {
      "url": "factbookeu.csv"
    },
            "transform": [
      {"filter": "datum.Area_sq_km > 200000"}
         ],
      "layer": [ {
      "mark": {"type": "point", "filled": true},
  "encoding": {
    "x": {"field": "Area_sq_km", "type": "quantitative"},
    "y": {"field": "Population", "type": "quantitative"},
    "color": {"field": "Country", "type": "nominal", 
             "scale": {"range": [
          "#d11141",
          "#00b159",
          "#ff0000",
          "#6b486b",
          "#a05d56",
          "#d0743c",
          "#ff8c00",
          "#008000",
          "#363b74",
          "#400000",
          "#204c39",
          "#009fff"
        ]}},
    "tooltip": {"field": "Country", "type": "nominal"}
  },
      },
                
      {
      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Population",
          "type": "quantitative",
        },
        "color": {"value": "grey"},
        "size": {"value": 2},
     
      },
      },
         
 
          ]
            
};
      
      
        //GDP PER PERSON ACROSS EUROPEAN COUNTRIES
      
      var GDPperPers = {
          "height": 300,
          "title": "GDP PER CAPITA (PER PERSON) VS POPULATION DENSITY",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
    "data": {
      "url": "factbookeu.csv"
    },
  "transform": [
   //{"calculate": "datum.Population/datum.Area_sq_km", "as": "Ratio"},
      {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"},
      {"calculate": "datum.Population/datum.Area_sq_km", "as": "Ratio"},
  ],
         
          "layer": [ {
   "mark": "bar",
    "encoding": {
     
        "x": {"field": "Country", "type": "nominal"},
        "y": {"field": "Ratio", "type": "quantitative",
              "axis": {
            "grid": true,
          },
          "scale": {"zero": false},
        "opacity": {"value": 0.7},
        "tooltip": {"field": "Ratio", "type": "quantitative"}
         },
},    
  },
                     {
     "mark": "bar",
      "encoding": {
      "x": {"field": "Country", "type": "nominal",},
        "y": {
          "field": "GDP per person", "type": "quantitative",
          "axis": {
            "grid": false
          },
          "scale": {"zero": false},
        },
        "color": {"value":"#3399ff"},
          "opacity": {"value": 0.6},
          
          //"field": "GDP per person", "type": "quantitative"}//, "scale": {"range": ["#99cc99", "#004000"],}}
    },}, 
   
  ],
 
  "resolve": {"scale": {"y": "independent"}},
}; 
      
      
        var popGDPScatter = {
             "title": "Population vs GDP - Highest density countries",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
            "width": 400,
            "height": 350,
    "data": {
      "url": "factbookeu.csv"
    },
         //   "transform": [ 
      //{"filter": "datum.Area_sq_km > 200000"}
       //  ],
             "transform": [
   {"calculate": "datum.Population/datum.Area_sq_km", "as": "Population Ratio"},
      {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"},
            
         
          {"filter": {"field": "Population Ratio", "range": [130, 1300]}}],
            "layer": [ 
                {
      "mark": {"type": "point", "filled": true},
  "encoding": {
    "x": {"field": "GDP per person", "type": "quantitative", "axis": {
            "grid": true
          },
          "scale": {"zero": false},
        },
    "y": {"field": "Population Ratio", "type": "quantitative", "axis": {
            "grid": true
          },
          "scale": {"zero": false},
        },
    "color": {"field": "Country", "type": "nominal", 
    },
    "tooltip": {"field": "Country", "type": "nominal"}
  },
                },
      ],
        };
      
      // POPULATION OF LARGEST COUNTRIES VS AREA - SCATTERPLOT
        var popGDPScatter2 = {
             "title": "Population vs GDP - Highest GDP countries",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
            "width": 400,
            "height": 350,
    "data": {
      "url": "factbookeu.csv"
    },
         //   "transform": [ 
      //{"filter": "datum.Area_sq_km > 200000"}
       //  ],
             "transform": [
   {"calculate": "datum.Population/datum.Area_sq_km", "as": "Population Ratio"},
      {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"},
            
         
          {"filter": {"field": "GDP per person", "range": [21000, 60000]}}],
            "layer": [ 
                {
      "mark": {"type": "point", "filled": true},
  "encoding": {
    "x": {"field": "GDP per person", "type": "quantitative", "axis": {
            "grid": true
          },
          "scale": {"zero": false},
        },
    "y": {"field": "Population Ratio", "type": "quantitative", "axis": {
            "grid": true
          },
          "scale": {"zero": false},
        },
    "color": {"field": "Country", "type": "nominal", 
    },
    "tooltip": {"field": "Country", "type": "nominal"}
  },
                },
      ],
        };
      
      
 
      
   // POPULATION DENSITY ACROSS EUROPEAN COUNTRIES
         var popDens = {
              "title": "POPULATION DENSITY - POPULATION TO AREA RATIO",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
             "height": 300,
    "data": {
      "url": "factbookeu.csv"
    },
  "transform": [
   {"calculate": "datum.Population/datum.Area_sq_km", "as": "Ratio"},
  ],
             "layer": [{
   "mark": "bar",
    "encoding": {
       // "x": {"field": "Year","type": "temporal", "axis": {"format": "%Y"}}, //"bin": "true",
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "Ratio"} },
        "y": {"field": "Ratio", "type": "quantitative"},
        "tooltip": {"field": "Ratio", "type": "quantitative"}
        
}
             },
   {
    "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Ratio",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
      },
            }
  ],
};           
      

         
      
      var GPDaverage = {
              "title": "AVERAGE GDP PER CAPITA (PER PERSON)",
          "height": 300,
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
              
    "data": {
      "url": "factbookeu.csv"
    },
          "transform": [
   //{"calculate": "datum.Population/datum.Area_sq_km", "as": "Ratio"},
      {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"},
              ],
      
        "layer": [
    {
      "mark": "bar",
      "encoding": {
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "GDP per person"}},
        "y": {"field": "GDP per person", "type": "quantitative"},
           "tooltip": {"field": "GDP per person", "type": "quantitative"}
      }
    },
            {
    "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "GDP per person",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
      },
            }
  ],
 // "resolve": {"scale": {"y": "independent"}}
};
      
  
      
  // Embed the visualization in the container with id `vis`
  vegaEmbed("#population", population);
  vegaEmbed("#areasq", areasq);
  vegaEmbed("#popScatter", popScatter);
       vegaEmbed("#GPDaverage", GPDaverage);
      vegaEmbed("#GDPperPers", GDPperPers);
      vegaEmbed("#popDens", popDens);
      vegaEmbed("#popGDPScatter", popGDPScatter);
       vegaEmbed("#popGDPScatter2", popGDPScatter2); 
  </script>
    </div>
</body>
</html>