<!DOCTYPE html>
<html>
<head>
  <title>Europe - Statistics</title>
  <meta charset="utf-8">
    
    

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.8/vega.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.3/vega-lite.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-rc7/vega-embed.js"></script>
    <!-- Dependencies for Vega visualization-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.8/vega.min.js"></script>
<!-- Dependencies for Vega-lite visualization-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.3/vega-lite.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="vega.css" />
<!-- Vega Tooltip
<script src="https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.4.4/vega-tooltip.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.4.4/vega-tooltip.min.css">
-->
  <style media="screen">
    /* Add space between Vega-Embed links  */
    .vega-actions a {
      margin-right: 5px;
    }
  </style>
</head>
<body>
    <div class="header">
  <h1>Europe - Statistics</h1>
    </div>
    
    
<ul class="topnav">
    <li><a href="vega.html">Story 1</a></li>
  <li><a href="first.html">Story 2</a></li>
    
 
    </ul>
    
    <div class="row">
        <div class="column middle">
  <!-- Container for the visualization -->
    <div id="birthRate"></div>
        </div>
         <div class="column side"> 
            <div class="textS">
        Firstly I decided to have a look at the birth rate across the countries. Birth rate as quantitative value is encoded as lenght of the bar which is very effective channel for quantitative data. Also mean of the birth rate for all countries is encoded as position of the line which again is a very effective channel for quantitative data. As a combination of quantitative data (birth rate) and nominal categorical data (countries), I have chosen a bar chart as that would be the most effective method to display this data. I have also added a tooltip so the user can view in detail the birth rate of each country.
             </div>
             <div class="textS">
        16 countries out of 39 have higher than average birth rate. Albania, Ireland and Iceland have much higher birth rate than all other countries. Germany however have much lower birth rate than other countries. 
             </div>
             
        </div>
         <div class="column middle">
             
    <div id="deathRate"></div>
        </div>
        
         <div class="column side"> 
          <div class="textS">
        Secondly I wanted to have a look at the death rate across the countries. Death rate as quantitative value is encoded as lenght of the bar which is very effective channel for quantitative data. Also mean of the death rate for all countries is encoded as position of the line which again is a very effective channel for quantitative data. As a combination of quantitative data (death rate) and nominal categorical data (countries), I have chosen a bar chart as that would be the most effective method to display this data. I have also added a tooltip so the user can view in detail the death rate of each country.
             </div>
             <div class="textS">
        20 countries out of 39 have higher than average birth rate. It is easy to see that Ukraine has much higher death rate than all other countries. Albania however have much lower death rate than other countries. 
             </div>
        </div>
         <div class="column h" style="text-align: center">
             
    <div id="birthVsDeath"></div>
        </div>
         <div class="column h"> 
            <div class="textS">
            Next step I took was to compare the birth rate and death rate. I have decided to use a stacked bar chart to display this data. birth rate and death rate as quantitative values are encoded as lenght of the bar which is very effective channel for quantitative data. As there are two quantitative data types (birth and death rates) I decide to add colour and opacity for the user to be able to see both values and which value is higher at same time. Light blue colour displays the birth rate and darker blue the death rate. I have decided to use a stacked bar chart instead of for example scatterplot as because of the amount of countries scatterplot wouldnt show the data in clear way. 
            </div>
           <div class="textS">
            It is clear to see that some countries such as Albania has very high birth rate as well as very low death rate. 23 countries out of 39 have higher birth rate than death rate. Majority of the countries have higher birth rate than death rate. 
            
            </div>
        </div>
         <div class="column middle">
    <div id="BirthToDeathRatio"></div>
        </div>
         <div class="column side"> 
            <div class="textS">
            Following on the findings from previous charts I decided to have a look at birth vs death rate ratio. To do that I took an birth rate and divided that by the death rate. Result of 1 would mean equal birth rate and death rate, higher than 1 means higher birth rate, and lower than 1 represents higher death rate. The bar chart displays the ratio. The ratio as quantitative value is encoded as lenght of the bar which is very effective channel for quantitative data. Also mean of the ratio for all countries is encoded as position of the line which again is a very effective channel for quantitative data. As a combination of quantitative data (birth/death ratio) and nominal categorical data (countries), I have chosed a bar chart as that would be the most effective method to display this data.
          </div>
        </div>
        <div class="column h">
          <div class="textS">
          It is clear to see that majority of the countries have higher than 1 ratio which means higher birth rate than death rate. The average across all countries is around 1.15 and 13 countries are above the average rate. 
          </div>
        </div>
        
         <div class="column t" style="text-align: center">
     <div id="DeathRateHisto"></div>
        </div>
        <div class="column t" style="text-align: center">
     <div id="HighestDeathHisto"></div>
        </div>
         <div class="column t" style="text-align: center">
     <div id="LowestDeathHisto"></div>
        </div>
        <div class="column t"> 
            <div class="textS">
            Following this I wanted to have a look at death rate across the countries over the years. I decided to use line as a mark as it is very effective to display the temporal type of data such as value across the years. Position of the line on the graph is an effective channel to display the quantitative data such as death rate. 
        </div>
            <div class="textS">
            It is interesting to see that generally average death rate across the years was quite stable and around the value of 9.5-10. However looking into more detail for countries with highest as well as lowest rates the rate was not as stable over the years. Majority of the countries with the highest death rate range anywhere between 8 and over 16, and majority of the countries increased over years especially between years 1985 and 2000. 
            However countries with lowest death rate show different trend, majority of the countries show decrease over the years and the values range between 12 and 6. 
        </div>
        </div>
      <div class="column h">
             
    <div id="GPDaverage" style="text-align: center"></div>
        </div>
         <div class="column h"> 
            <div class="textS">
            Taking into consideration such a varience in death rate I decided to see if there is any relationship between death rate and ecomical status of the country. To do that I decided to focus on GDP per capita, which is a measure of a country's economic output (GDP) that accounts for its number of people. That makes it a good measurement of a country's standard of living. To get the GDP per capita I have divided the country's GDP by its total population. As a first step I decided to use a bar chart to display the findings for each country. GDP per capita as quantitative values are encoded as lenght of the bar which is very effective channel for quantitative data. Also mean of the GDP per capita for all countries is encoded as position of the line which again is a very effective channel for quantitative data.
        </div>
              <div class="textS">
                As a combination of quantitative data (GDP per capita) and nominal categorical data (countries), I have chosed a bar chart as that would be the most effective method to display this data. I have also added a tooltip so the user can view in detail the GDP per capita of each country.
            It is very easy to see that Luxembourg has a much higher than average GDP per capita. 19 countries out of 39 have higher than average GDP per capita. 
            </div>
             
        </div>  
         
  <div class="column t" style="text-align: center">
     <div id="Scatter2"></div>
        </div>
        <div class="column t" style="text-align: center">
     <div id="Scatter3"></div>
        </div>
         <div class="column h"> 
            <div class="textS">
            To follow up from the findings on previous chart I decided to create 2 scatterplots to verify the results. First scatterplot displays all high GDP per capita countries and their death rate. Second scatterplot displays all countries with low GDP per capita and their death rate. The scatterplots consists of death rate and GDP per capita as two quantitative data types are encoded as position of the point which is a very effective channel for quantitative data. The countries are encoded as colour which is effective channel to represent categorical data.
             </div>
             <div class="textS">
             First scatterplot displaying the highest GDP countries shows average death rate for this countries is around 9. All of the countries with highest GDP have a death rate below 11 and majority of them (11/19) of these countries have death rate below average.
             
             </div>
            <div class="textS">
             Second scatterplot however shows all the lowest GDP countries and average death rate between them is higher than average among all countries. Only 5 out of 16 of this countries have below average death rate. 
             </div>
        </div>
        
     
        
    </div>
   
    
  <script>
      
      
  
   // BIRTH RATE ACROSS EUROPEAN COUNTRIES - BAR CHART   
      
 var birthRate = {
        "title": "BIRTH RATE ACROSS EUROPEAN COUNTRIES",
     "height": 300,
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
    "data": {
      "url": "factbookeu.csv"
    },
     "layer": [ {
   "mark": "bar",
    "encoding": {
       // "x": {"field": "Year","type": "temporal", "axis": {"format": "%Y"}}, //"bin": "true",
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "Birth_rate"}},
        "y": {"field": "Birth_rate", "type": "quantitative",
             "axis": {
            "grid": true
          },
          "scale": {"zero": false}
      
             },
        "tooltip": {"field": "Birth_rate", "type": "quantitative"}
        
}
     },
     
  {
      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Birth_rate",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
     
      },
                     },
              ],
  };
      
       // DEATH RATE ACROSS EUROPEAN COUNTRIES
      
            var deathRate = {
                 "title": "DEATH RATE ACROSS COUNTRIES",
                "height": 300,
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
    "data": {
      "url": "factbookeu.csv"
    },
       "layer": [ {
   "mark": "bar",
    "encoding": {
       // "x": {"field": "Year","type": "temporal", "axis": {"format": "%Y"}}, //"bin": "true",
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "Death_rate"}},
        "y": {"field": "Death_rate", "type": "quantitative",
             "axis": {
            "grid": true
          },
          "scale": {"zero": false}
      
             },
        "tooltip": {"field": "Death_rate", "type": "quantitative"}
        
}
     },
     
  {
      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Death_rate",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
     
      },
                     },
              ],
  };
      
      
      var birthVsDeath = {
          "height": 300,
          "title": "GDP PER CAPITA (PER PERSON) VS POPULATION DENSITY",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
    "data": {
      "url": "factbookeu.csv"
    },
         
          "layer": [ {
   "mark": "bar",
    "encoding": {
     
        "x": {"field": "Country", "type": "nominal"},
        "y": {"field": "Birth_rate", "type": "quantitative",
              "axis": {
            "grid": true,
          },
          "scale": {"zero": false},
        "opacity": {"value": 0.7},
        "tooltip": {"field": "Birth_rate", "type": "quantitative"}
         },
},    
  },
                     {
     "mark": "bar",
      "encoding": {
      "x": {"field": "Country", "type": "nominal",},
        "y": {
          "field": "Death_rate", "type": "quantitative",
          "axis": {
            "grid": false
          },
          "scale": {"zero": false},
        },
        "color": {"value":"#3399ff"},
          "opacity": {"value": 0.6},
          
          //"field": "GDP per person", "type": "quantitative"}//, "scale": {"range": ["#99cc99", "#004000"],}}
    },}, 
   
  ],
 
  //"resolve": {"scale": {"y": "independent"}},
}; 
      
 
      
      // Birth to Death ratio
         var BirthToDeathRatio = {
              "title": "BIRTH RATE TO DEATH RATE RATIO",
           
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
             "height": 300,
    "data": {
      "url": "factbookeu.csv"
    },
  "transform": [
   {"calculate": "datum.Birth_rate/datum.Death_rate", "as": "Ratio"},
  ],
             "layer": [{
   "mark": "bar",
    "encoding": {
       // "x": {"field": "Year","type": "temporal", "axis": {"format": "%Y"}}, //"bin": "true",
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "Ratio"} },
        "y": {"field": "Ratio", "type": "quantitative"},
        "tooltip": {"field": "Ratio", "type": "quantitative"}
        
}
             },
   {
    "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Ratio",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
      },
            }
  ],
}; 
      
      
    
      
      
        // LIFE EXPECTENCY ACROSS EUROPEAN COUNTRIES
      
            var lifeExpect = {
                 "title": "LIFE EXPECTENCY ACROSS COUNTRIES",
                "height": 300,
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
    "data": {
      "url": "factbookeu.csv"
    },
      "layer": [ {
   "mark": "bar",
    "encoding": {
       // "x": {"field": "Year","type": "temporal", "axis": {"format": "%Y"}}, //"bin": "true",
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "Life expectancy"}},
        "y": {"field": "Life expectancy", "type": "quantitative",
             "axis": {
            "grid": true
          },
          "scale": {"zero": false}
      
             },
        "tooltip": {"field": "Life expectancy", "type": "quantitative"}
        
}
     },
     
  {
      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Life expectancy",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
     
      },
                     },
              ],
  };
       
            
  
      //LIFE EXPECTENCY OVER YEARS - LOWEST COUNTRIES ONLY
 
      var DeathRateHisto = {
                 "title": "AVERAGE DEATH RATE",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
              "width": 400,
            "height": 300,
    "data": {
      "url": "lifeexpt.csv"
    },
      
  "mark": "line",
  "encoding": {
    "x": {"field": "Year", "type": "temporal", "axis": {"format": "%Y"}},
    "y": {"field": "Death rate", "type": "quantitative",
           "aggregate": "mean",
          "axis": {
            "grid": false
          },
          //"scale": {"zero": false}
        },
    
      
  },
}; 
      
       //LIFE EXPECTENCY OVER YEARS - LOWEST COUNTRIES ONLY
 
      var LowestDeathHisto = {
                 "title": "COUNTRIES WITH LOWEST DEATH RATE",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
            "width": 400,
            "height": 300,
    "data": {
      "url": "lifeexpt.csv"
    },
      
       "transform": [
           {"filter": {"field": "Country", "oneOf":["Albania", "Andorra", "Iceland", "Liechtenstein", "Cyprus", "Ireland", "Malta"]}}
          //  {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"}
       ],
  "mark": "line",
  "encoding": {
    "x": {"field": "Year", "type": "temporal", "axis": {"format": "%Y"}},
    "y": {"field": "Death rate", "type": "quantitative",
          "axis": {
            "grid": false
          },
         // "scale": {"zero": false}
        },
    
         
         
      "color": {"field": "Country", "type": "nominal"},
      
  },
};
      
       var HighestDeathHisto = {
                 "title": "COUNTRIES WITH HIGHEST DEATH RATE",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
            "width": 400,
            "height": 300,
    "data": {
      "url": "lifeexpt.csv"
    },
      
       "transform": [
           {"filter": {"field": "Country", "oneOf":["Ukraine", "Latvia", "Bulgaria", "Belarus", "Estonia", "Hungary"]}}
          //  {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"}
       ],
  "mark": "line",
  "encoding": {
    "x": {"field": "Year", "type": "temporal", "axis": {"format": "%Y"}},
    "y": {"field": "Death rate", "type": "quantitative",
          "axis": {
            "grid": false
          },
          //"scale": {"zero": false}
        },
    
         
         
      "color": {"field": "Country", "type": "nominal"},
      
  },
};
      
      //LIFE EXPECTENCY OVER YEARS - LOWEST COUNTRIES ONLY
 
      var LifeExpHisto = {
                 "title": "LIFE EXPECTENCY OVER YEARS",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
            "width": 400,
            "height": 300,
    "data": {
      "url": "lifeexpt.csv"
    },
      
       "transform": [
           {"filter": {"field": "Country", "oneOf":["Ukraine", "Latvia", "Romania", "Belarus"]}}
          //  {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"}
       ],
  "mark": "line",
  "encoding": {
    "x": {"field": "Year", "type": "temporal", "axis": {"format": "%Y"}},
    "y": {"field": "Life expectancy", "type": "quantitative",
          "axis": {
            "grid": false
          },
          "scale": {"zero": false}
        },
    
         
         
      "color": {"field": "Country", "type": "nominal"},
      
  },
};
      
    
        var AverLifeExptHisto = {
                 "title": "AVERAGE LIFE EXPECTENCY",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
              "width": 400,
            "height": 300,
    "data": {
      "url": "lifeexpt.csv"
    },
      
  "mark": "line",
  "encoding": {
    "x": {"field": "Year", "type": "temporal", "axis": {"format": "%Y"}},
    "y": {"field": "Life expectancy", "type": "quantitative",
           "aggregate": "mean",
          "axis": {
            "grid": false
          },
          "scale": {"zero": false}
        },
    
      
  },
}; 
      
       var LifeExpectLowest = {
                 "title": "LIFE EXPECTENCY OVER YEARS",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
             "width": 400,
            "height": 300,
    "data": {
      "url": "lifeexpt.csv"
    },
      
       "transform": [
           {"filter": {"field": "Country", "oneOf":["Andorra", "Sweden", "Iceland", "Switzerland"]}}
          //  {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"}
       ],
  "mark": "line",
  "encoding": {
    "x": {"field": "Year", "type": "temporal", "axis": {"format": "%Y"}},
    "y": {"field": "Life expectancy", "type": "quantitative",
          "axis": {
            "grid": false
          },
          "scale": {"zero": false}
        },
    
         
         
      "color": {"field": "Country", "type": "nominal"},
      
  },
};
      
       var Scatter2 = {
             "title": "Highest GDP countries - Death Rate",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
            "width": 400,
            "height": 350,
    "data": {
      "url": "factbookeu.csv"
    },
         //   "transform": [ 
      //{"filter": "datum.Area_sq_km > 200000"}
       //  ],
             "transform": [
      {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"},
            
         
          {"filter": {"field": "GDP per person", "range": [21000, 60000]}}],
            "layer": [ 
                {
      "mark": {"type": "point", "filled": true},
  "encoding": {
    "x": {"field": "GDP per person", "type": "quantitative", "axis": {
            "grid": true
          },
        //  "scale": {"zero": false},
        },
    "y": {"field": "Death_rate", "type": "quantitative", "axis": {
            "grid": true
          },
          //"scale": {"zero": false},
        },
    "color": {"field": "Country", "type": "nominal", 
    },
    "tooltip": {"field": "Country", "type": "nominal"}
  },
                },
                 {
      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Death_rate",
          "type": "quantitative",
        },
        "color": {"value": "grey"},
        "size": {"value": 2},
     
      },
      },
         
      ],
        };
      
       var Scatter3 = {
             "title": "Lowest GDP countries - Death Rate",
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
            "width": 400,
            "height": 350,
    "data": {
      "url": "factbookeu.csv"
    },
         //   "transform": [ 
      //{"filter": "datum.Area_sq_km > 200000"}
       //  ],
             "transform": [
      {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"},
            
         
          {"filter": {"field": "GDP per person", "range": [0, 15000]}}],
            "layer": [ 
                {
      "mark": {"type": "point", "filled": true},
  "encoding": {
    "x": {"field": "GDP per person", "type": "quantitative", "axis": {
            "grid": true
          },
        //  "scale": {"zero": false},
        },
    "y": {"field": "Death_rate", "type": "quantitative", "axis": {
            "grid": true
          },
         // "scale": {"zero": false},
        },
    "color": {"field": "Country", "type": "nominal", 
    },
    "tooltip": {"field": "Country", "type": "nominal"}
  },
                },
                {
      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "Death_rate",
          "type": "quantitative",
        },
        "color": {"value": "grey"},
        "size": {"value": 2},
     
      },
      },
                
      ],
        };
       var GPDaverage = {
              "title": "AVERAGE GPD PER CAPITA (PER PERSON)",
          "height": 300,
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
              
    "data": {
      "url": "factbookeu.csv"
    },
          "transform": [
   //{"calculate": "datum.Population/datum.Area_sq_km", "as": "Ratio"},
      {"calculate": "datum.GDP/datum.Population", "as": "GDP per person"},
              ],
      
        "layer": [
    {
      "mark": "bar",
      "encoding": {
        "x": {"field": "Country", "type": "nominal", "sort": {"op": "mean", "field": "GDP per person"}},
        "y": {"field": "GDP per person", "type": "quantitative"},
           "tooltip": {"field": "GDP per person", "type": "quantitative"}
      }
    },
            {
    "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "GDP per person",
          "type": "quantitative",
        },
        "color": {"value": "red"},
        "size": {"value": 2},
      },
            }
  ],
 // "resolve": {"scale": {"y": "independent"}}
};
      
      
      
  // Embed the visualization in the container with id `vis`
 
  vegaEmbed("#birthRate", birthRate);
    
      vegaEmbed("#birthVsDeath", birthVsDeath);
      vegaEmbed("#BirthToDeathRatio", BirthToDeathRatio);
      vegaEmbed("#lifeExpect", lifeExpect);
    
       vegaEmbed("#LifeExpHisto", LifeExpHisto);
        vegaEmbed("#AverLifeExptHisto", AverLifeExptHisto);
      vegaEmbed("#LifeExpectLowest", LifeExpectLowest);
         vegaEmbed("#deathRate", deathRate);
      vegaEmbed("#DeathRateHisto", DeathRateHisto);
      vegaEmbed("#LowestDeathHisto", LowestDeathHisto);
     vegaEmbed("#HighestDeathHisto", HighestDeathHisto);
       vegaEmbed("#Scatter2", Scatter2);
       vegaEmbed("#Scatter3", Scatter3);
      vegaEmbed("#GPDaverage", GPDaverage);
  </script>
    
  
</body>
</html>